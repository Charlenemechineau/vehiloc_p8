{# 
  Page d'accueil du site Véhicloc
  Cette page affiche la liste des voitures (récupérées depuis la base)
  et la section "promesse Véhicloc"
#}

{# On utilise la structure du fichier base.html.twig (header + footer déjà inclus) #}
{% extends 'base.html.twig' %}

{# Titre de la page, affiché dans l’onglet du navigateur #}
{% block title %}Accueil - Véhicloc{% endblock %}

{# Contenu principal de la page #}
{% block body %}

<section id="fleet">
    <h2>Découvrez la flotte de véhicules chez Véhicloc</h2>
    <p>
        Que vous ayez besoin d'une petite citadine agile, d'une berline élégante ou même d'un SUV spacieux,
        nous avons une variété de véhicules pour répondre à vos exigences.
    </p>

    <div class="fleet-list">

        {# Si aucune voiture n'est enregistrée dans la base, on affiche un message #}
        {% if voitures is empty %}
            <p>Aucune voiture disponible pour le moment. Ajoutez-en via phpMyAdmin.</p>
        {% else %}

            {# Sinon, on parcourt la liste des voitures récupérées par le contrôleur #}
            {% for voiture in voitures %}
                <article>
                    <div class="mini-car-title">
                        {# Lien vers la page de détail du véhicule #}
                        <a href="{{ path('app_voiture_detail', {'id': voiture.id}) }}">
                            <h3>{{ voiture.marque }}</h3>
                            <p>ou similaire | {{ voiture.localisation }}</p>
                        </a>

                        {# Icône de suppression #}
                        <div>
                            <a href="{{ path('app_voiture_supprimer', {'id': voiture.id}) }}">
                                <img src="/assets/icons/trash.png" alt="Supprimer" />
                            </a>
                        </div>
                    </div>

                    {# Informations sur la voiture : nombre de places, boîte, etc. #}
                    <div class="mini-car-icons">
                        <div>
                            <img src="/assets/icons/persons.png" alt="{{ voiture.nbPlaces }} places" />
                            <p>{{ voiture.nbPlaces }} places</p>
                        </div>
                        <div>
                            <img src="/assets/icons/motor.png" alt="{{ voiture.boiteVitesse ?? voiture.boite_vitesse }}" />
                            <p>{{ voiture.boiteVitesse ?? voiture.boite_vitesse }}</p>
                        </div>
                        <div>
                            <img src="/assets/icons/km.png" alt="km illimités" />
                            <p>Km illimités</p>
                        </div>
                        <div>
                            <img src="/assets/icons/plus.png" alt="Plus" />
                            <p>Plus</p>
                        </div>
                    </div>

                    {# Affichage des prix (par jour et par mois) #}
                    <div class="mini-car-price">
                        <p class="price-per-day">
                            {{ voiture.prixJournalier ?? voiture.prix_journalier }} € / jour
                        </p>
                        <p class="price-per-month">
                            {{ voiture.prixMensuel ?? voiture.prix_mensuel }} € / mois
                        </p>
                    </div>
                </article>
            {% endfor %}

        {% endif %}
    </div>
</section>

{# Section "promesse Véhicloc" avec le texte fixe de la maquette #}
<section id="promises">
    <div>
        <h2>La promesse Véhicloc</h2>

        <div class="promise">
            <img src="/assets/icons/insurance.png" alt="Assurance et Assistance">
            <div class="promise-text">
                <h3>Assurance et Assistance</h3>
                <p>
                    Votre tranquillité d'esprit est notre priorité. Toutes nos locations mensuelles incluent une
                    assurance complète et une assistance routière, pour garantir une conduite en toute sécurité.
                </p>
            </div>
        </div>

        <div class="promise">
            <img src="/assets/icons/booking.png" alt="Réservation facile">
            <div class="promise-text">
                <h3>Réservation facile</h3>
                <p>
                    Notre plateforme vous permet de réserver votre voiture en quelques clics.
                    Sélectionnez vos dates, choisissez le modèle qui vous convient et finalisez votre réservation
                    en un rien de temps.
                </p>
            </div>
        </div>
    </div>

    <div>
        <img src="/assets/img/promise.png" alt="La promesse Véhicloc">
    </div>
</section>

{% endblock %}
